{"version":3,"sources":["../src/octokitFromAuthSafe.ts"],"sourcesContent":["import { getGitHubAuthToken } from \"get-github-auth-token\";\nimport { Octokit } from \"octokit\";\n\nimport { OctokitOptions } from \"./types.js\";\n\nexport async function octokitFromAuthSafe(\n\toptions?: OctokitOptions,\n): Promise<Octokit> {\n\tconst auth = await retrieveAuthSafe(options?.auth as string | undefined);\n\n\treturn new Octokit({ ...options, auth });\n}\n\nasync function retrieveAuthSafe(provided: string | undefined) {\n\tif (provided) {\n\t\treturn provided;\n\t}\n\n\tif (provided === \"\") {\n\t\treturn undefined;\n\t}\n\n\tconst auth = await getGitHubAuthToken();\n\tif (auth.succeeded) {\n\t\treturn auth.token;\n\t}\n\n\treturn undefined;\n}\n"],"mappings":"AAAA,SAAS,0BAA0B;AACnC,SAAS,eAAe;AAIxB,eAAsB,oBACrB,SACmB;AACnB,QAAM,OAAO,MAAM,iBAAiB,SAAS,IAA0B;AAEvE,SAAO,IAAI,QAAQ,EAAE,GAAG,SAAS,KAAK,CAAC;AACxC;AAEA,eAAe,iBAAiB,UAA8B;AAC7D,MAAI,UAAU;AACb,WAAO;AAAA,EACR;AAEA,MAAI,aAAa,IAAI;AACpB,WAAO;AAAA,EACR;AAEA,QAAM,OAAO,MAAM,mBAAmB;AACtC,MAAI,KAAK,WAAW;AACnB,WAAO,KAAK;AAAA,EACb;AAEA,SAAO;AACR;","names":[]}